<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy Global Airtime</title>
</head>
<body>
    <h1>Buy Global Airtime</h1>
    
    <form action="/buy_global_airtime" method="post">
        <label for="phone_number">Enter your phone number:</label>
        <input type="text" id="phone_number" name="Phone_number" required>
        <button type="submit">Submit</button>
    </form>

    {% if products %}
        <h2>Select Product:</h2>
        <form action="/create_transaction" method="post">
            <select name="product" id="product_select">
                {% for product in products %}
                    <option value="{{ product.id }}">
                        {{ product.name }} - Retail amount: {{ product.prices.retail.amount }} {{ product.prices.retail.unit }},
                        Fee: {{ product.prices.retail.fee }} {{ product.prices.retail.unit }},
                        Destination amount: {{ product.destination.amount }} {{ product.destination.unit }}
                    </option>
                {% endfor %}
            </select>
            <!-- Add hidden input field for product_id -->
            <input type="hidden" name="product_id" id="product_id" value="">
            <button type="submit">Buy</button>
        </form>
    
        <!-- JavaScript to set the product_id -->
        <script>
            // Get the select element
            var selectElement = document.getElementById('product_select');
            
            // Add event listener to update product_id when a product is selected
            selectElement.addEventListener('change', function() {
                var productIdInput = document.getElementById('product_id');
                productIdInput.value = selectElement.value;
            });
        </script>
    {% endif %}
    
</body>
</html>